# üß™ –¢–ï–°–¢: –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏—è —Å –Ω–æ–≤ –∫–ª–∏–µ–Ω—Ç

## ‚ö†Ô∏è –í–ê–ñ–ù–û: –ü—ä—Ä–≤–æ –ø—Ä–∏–ª–æ–∂–µ—Ç–µ SQL –º–∏–≥—Ä–∞—Ü–∏–∏—Ç–µ!

–ê–∫–æ –ù–ï —Å—Ç–µ –∏–∑–ø—ä–ª–Ω–∏–ª–∏ SQL –∫–æ–¥–∞ –æ—Ç `apply-migrations.sql`, **–Ω–∞–ø—Ä–∞–≤–µ—Ç–µ –≥–æ –°–ï–ì–ê**!

–ë–µ–∑ –º–∏–≥—Ä–∞—Ü–∏–∏—Ç–µ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏—è—Ç–∞ **–ù–Ø–ú–ê –î–ê –†–ê–ë–û–¢–ò**.

–û—Ç–≤–æ—Ä–µ—Ç–µ `APPLY_MIGRATIONS_NOW.md` –∏ —Å–ª–µ–¥–≤–∞–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏—Ç–µ —Ç–∞–º.

---

## –°—Ç—ä–ø–∫–∏ –∑–∞ —Ç–µ—Å—Ç–≤–∞–Ω–µ:

### 1Ô∏è‚É£ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

**–û–ø—Ä–µ—Å–Ω–µ—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ:**
- Windows/Linux: `Ctrl + Shift + R`
- Mac: `Cmd + Shift + R`

**–û—Ç–≤–æ—Ä–µ—Ç–µ –∫–æ–Ω–∑–æ–ª–∞—Ç–∞:**
- –ù–∞—Ç–∏—Å–Ω–µ—Ç–µ `F12` (–∏–ª–∏ `Cmd + Option + I` –Ω–∞ Mac)
- –ò–∑–±–µ—Ä–µ—Ç–µ —Ç–∞–± **"Console"**
- –ò–∑—á–∏—Å—Ç–µ—Ç–µ —Å—Ç–∞—Ä–∏—Ç–µ –ª–æ–≥–æ–≤–µ (–∫–ª–∏–∫–Ω–µ—Ç–µ üóëÔ∏è)

### 2Ô∏è‚É£ –°—ä–∑–¥–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏—è

1. –ö–ª–∏–∫–Ω–µ—Ç–µ –Ω–∞ —Ç–∞–± **"–ì—Ä–∞—Ñ–∏–∫"**
2. –ö–ª–∏–∫–Ω–µ—Ç–µ **"+ –ù–æ–≤–∞ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏—è"**
3. –ü–æ–ø—ä–ª–Ω–µ—Ç–µ:
   - **–£—Å–ª—É–≥–∞**: –ò–∑–±–µ—Ä–µ—Ç–µ –∫–∞–∫–≤–∞—Ç–æ –∏—Å–∫–∞—Ç–µ
   - **–î–∞—Ç–∞**: –ò–∑–±–µ—Ä–µ—Ç–µ –¥–∞—Ç–∞
   - **–ù–∞—á–∞–ª–µ–Ω —á–∞—Å**: 10:00
   - **–ö—Ä–∞–µ–Ω —á–∞—Å**: 11:00
4. –ö–ª–∏–∫–Ω–µ—Ç–µ –Ω–∞ **"–ù–æ–≤ –∫–ª–∏–µ–Ω—Ç"**
5. –í—ä–≤–µ–¥–µ—Ç–µ:
   - **–ò–º–µ**: `–¢–µ—Å—Ç –ö–ª–∏–µ–Ω—Ç`
   - **–¢–µ–ª–µ—Ñ–æ–Ω**: `0888123456` (–æ–ø—Ü–∏–æ–Ω–∞–ª–Ω–æ)
6. –ö–ª–∏–∫–Ω–µ—Ç–µ **"–°—ä–∑–¥–∞–π"**

### 3Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ —Ä–µ–∑—É–ª—Ç–∞—Ç–∞

## ‚úÖ –ê–ö–û –†–ê–ë–û–¢–ò:

–©–µ –≤–∏–¥–∏—Ç–µ:
- Alert —Å—ä–æ–±—â–µ–Ω–∏–µ: **"–£—Å–ø–µ—Ö - –†–µ–∑–µ—Ä–≤–∞—Ü–∏—è—Ç–∞ –µ —Å—ä–∑–¥–∞–¥–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ"**
- –ú–æ–¥–∞–ª—ä—Ç —Å–µ –∑–∞—Ç–≤–∞—Ä—è
- –ù–æ–≤–∞—Ç–∞ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏—è —Å–µ –ø–æ–∫–∞–∑–≤–∞ –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–∞

–í –∫–æ–Ω–∑–æ–ª–∞—Ç–∞ —â–µ –≤–∏–¥–∏—Ç–µ (–±–µ–∑ –≥—Ä–µ—à–∫–∏):
```
=== NEW CLIENT MODE ===
newClientName: –¢–µ—Å—Ç –ö–ª–∏–µ–Ω—Ç
newClientPhone: 0888123456
Getting authenticated user...
User ID: xxxxx
Inserting new unregistered client...
Insert result - data: {id: "xxx", full_name: "–¢–µ—Å—Ç –ö–ª–∏–µ–Ω—Ç", ...}
Insert result - error: null
Successfully created client with ID: xxx
=== CHECKING CLIENT ID ===
clientId: xxx
isUnregistered: true
=== CREATING APPOINTMENT ===
...
SUCCESS: Appointment created!
```

## ‚ùå –ê–ö–û –ù–ï –†–ê–ë–û–¢–ò:

–©–µ –≤–∏–¥–∏—Ç–µ **—á–µ—Ä–≤–µ–Ω–∏ –≥—Ä–µ—à–∫–∏** –≤ –∫–æ–Ω–∑–æ–ª–∞—Ç–∞.

**–ö–û–ü–ò–†–ê–ô–¢–ï –í–°–ò–ß–ö–ò –õ–û–ì–û–í–ï** –∏ –º–∏ –≥–∏ –∏–∑–ø—Ä–∞—Ç–µ—Ç–µ!

---

## –ß–µ—Å—Ç–æ —Å—Ä–µ—â–∞–Ω–∏ –≥—Ä–µ—à–∫–∏:

### –ì—Ä–µ—à–∫–∞: "new row violates row-level security policy"

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ —Å—Ç–µ –ø—Ä–∏–ª–æ–∂–∏–ª–∏ SQL –º–∏–≥—Ä–∞—Ü–∏–∏—Ç–µ

**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç–≤–æ—Ä–µ—Ç–µ `APPLY_MIGRATIONS_NOW.md`
2. –°–ª–µ–¥–≤–∞–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏—Ç–µ
3. –ò–∑–ø—ä–ª–Ω–µ—Ç–µ SQL –∫–æ–¥–∞ –≤ Supabase Dashboard

### –ì—Ä–µ—à–∫–∞: "No authenticated user"

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ —Å—Ç–µ –≤–ª–µ–∑–ª–∏

**–†–µ—à–µ–Ω–∏–µ:** –í–ª–µ–∑—Ç–µ –∫–∞—Ç–æ admin –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª

### –ì—Ä–µ—à–∫–∞: "Insert result - error: {...}"

**–ü—Ä–∏—á–∏–Ω–∞:** RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –Ω–µ –ø–æ–∑–≤–æ–ª—è–≤–∞—Ç —Å—ä–∑–¥–∞–≤–∞–Ω–µ

**–†–µ—à–µ–Ω–∏–µ:** –ö–æ–ø–∏—Ä–∞–π—Ç–µ —Ü—è–ª–∞—Ç–∞ –≥—Ä–µ—à–∫–∞ –∏ –º–∏ —è –∏–∑–ø—Ä–∞—Ç–µ—Ç–µ

---

## –°–ª–µ–¥ —É—Å–ø–µ—à–µ–Ω —Ç–µ—Å—Ç:

–ê–∫–æ –≤—Å–∏—á–∫–æ —Ä–∞–±–æ—Ç–∏, –ø—Ä–æ–≤–µ—Ä–µ—Ç–µ:

1. **–ì—Ä–∞—Ñ–∏–∫** ‚Üí –ù–æ–≤–∞—Ç–∞ —Ä–µ–∑–µ—Ä–≤–∞—Ü–∏—è —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–µ –≤–∏–∂–¥–∞
2. **–ö–ª–∏–µ–Ω—Ç–∏** ‚Üí –ù–æ–≤–∏—è—Ç –∫–ª–∏–µ–Ω—Ç "–¢–µ—Å—Ç –ö–ª–∏–µ–Ω—Ç" —Ç—Ä—è–±–≤–∞ –¥–∞ –µ –≤ —Å–ø–∏—Å—ä–∫–∞
3. **–ò–º–µ –∏ —Ç–µ–ª–µ—Ñ–æ–Ω** ‚Üí –¢—Ä—è–±–≤–∞ –¥–∞ —Å–µ –ø–æ–∫–∞–∑–≤–∞—Ç –ø—Ä–∞–≤–∏–ª–Ω–æ

**–ì–æ—Ç–æ–≤–æ!** ‚úÖ

---

## –ù—É–∂–¥–∞–µ—Ç–µ —Å–µ –æ—Ç –ø–æ–º–æ—â?

–ê–∫–æ –Ω–µ—â–æ –Ω–µ —Ä–∞–±–æ—Ç–∏:
1. –ö–æ–ø–∏—Ä–∞–π—Ç–µ **–í–°–ò–ß–ö–ò –ª–æ–≥–æ–≤–µ** –æ—Ç –∫–æ–Ω–∑–æ–ª–∞—Ç–∞ (–æ—Ç –ø—ä—Ä–≤–∏—è –¥–æ –ø–æ—Å–ª–µ–¥–Ω–∏—è —Ä–µ–¥)
2. –ò–∑–ø—Ä–∞—Ç–µ—Ç–µ –º–∏ –≥–∏
3. –ö–∞–∂–µ—Ç–µ –º–∏ –∫–∞–∫–≤–æ –≤–∏–¥—è—Ö—Ç–µ –Ω–∞ –µ–∫—Ä–∞–Ω–∞ (alert —Å—ä–æ–±—â–µ–Ω–∏–µ, –≥—Ä–µ—à–∫–∞, –∏ —Ç.–Ω.)
